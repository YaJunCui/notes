# 客户端和服务端

在这一章节，我们会深入学习怎样使用 Boost.Asio 建立非凡的客户端和服务端应用。你可以运行并测试它们，而且在理解之后，你可以把它们做为框架来构造自己的应用。

在接下来的例子中：

* 客户端使用一个用户名（无密码）登录到服务端。
* 所有的连接由客户端建立，当客户端请求时，服务端回应。
* 所有的请求和回复都以换行符结尾（'\n'）
* 对于 5 秒钟没有 ping 操作的客户端，服务端会自动断开其连接。

客户端可以发送如下请求：

* 获得所有已连接客户端的列表。
* 客户端可以 ping，当它 ping 时，服务端返回 ping ok 或者 ping client\_list\_chaned（在接下来的例子中，客户端重新请求已连接的客户端列表）

为了更有趣一点，我们增加了一些难度：

* 每个客户端登录 6 个用户连接，比如 Johon, James, Lucy,Tracy, Frank 和 Abby。
* 每个客户端连接随机地 ping 服务端（随机 7 秒；这样的话，服务端会时不时关闭一个连接）

## 同步客户端/服务端

首先，我们会实现同步应用。你会发现它的代码很直接而且易读的。而且因为所有的网络调用都是阻塞的，所以它不需要独立的线程。

### 同步客户端

同步客户端会以你所期望的串行方式运行；连接到服务端，登录服务器，然后执行连接循环，比如休眠一下，发起一个请求，读取服务端返回，然后再休眠一会，然后一直循环下去……

![同步客户端](https://github.com/YaJunCui/notes/blob/master/images/boost_asio_sync_client.png?raw=true)
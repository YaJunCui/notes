# 伪造邮件的攻击与防范

> 以下知识以学习为目的，请不要用来犯罪，否则造成的风险由滥用者个人自行承担。

## 一、邮件服务提供商的攻击与防范

SMTP协议是一个相当透明的协议，作为邮件发送者可以指定SMTP发送者的发送账户、发送账户的显示名称、SMTP服务器域名等信息，如果接受端未对这些信息进行认证，就可能放过一些刻意伪造的邮件。但是，现在的邮件服务器都有黑名单和反向认证等机制，如检查邮件来源IP、检查邮件发送域、反向DNS查询、登录验证等。伪造邮件是很难通过严格设置的邮件服务器的。

理论上，我们可以伪造任何人的邮件。但这个伪造的邮件能不能到达目标, 就看目标的邮件服务提供商有多凶悍了。不过就目前来看，包括Gmail和hotmail在内的邮件服务提供商都不敢把这反欺诈机制的等级开得太高，毕竟有很多的商用网站都有网页提交邮件的功能，如果他们把等级设高了，这些邮件都会被误伤 -- 如果无法被送达, 他们轻则流失用户，重则被官司缠身。

## 二、首先明白这点

在SMTP服务器有中继转发功能和SMTP认证（见 [反垃圾邮件网关 需关闭邮件中继开启SMTP认证](https://blog.csdn.net/gscaiyucheng/article/details/21946277)），要知道关闭了中继转发功能和开启SMTP认证的SMTP服务器，它会接受到发送到自己的邮件但不进行转发，只有通过了SMTP验证，才会去中继转发给别的SMTP服务器。

## 三、攻击方法

1.国外有个网站可以帮你在线制作伪造邮件：http://deadfake.com/Sent.aspx?sent=true。

2.通过自己在电脑上配置一台SMTP服务器(Advanced Direct Remailer)和电子邮件客户端软件(我选的是网易闪电邮)，将要发的邮件先发给本机的SMTP服务器，然后让服务器发给目标用户的SMTP服务器即可。

3.直接使用telnet程序连接发送邮件：telnet +空格+目标SMTP服务器+空格+25(SMTP服务端口)


## 参考文献：  

[1] [关于伪造邮件的攻与防](https://blog.csdn.net/gscaiyucheng/article/details/22089567)  
[2] [反垃圾邮件网关 需关闭邮件中继开启SMTP认证](https://blog.csdn.net/gscaiyucheng/article/details/21946277)